package ca.mcmaster.cas.se2aa4.island.CityGen.MarkovNameGen;

import java.util.List;
import java.util.Random;

import ca.mcmaster.cas.se2aa4.island.RandomNumberGenerator.RandomNumber;

public class NameGenerator {

    private static int[][] letters = {{0,13,17,36,37,38,46,53,69,71,84,110,124,204,206,209,210,235,244,255,262,262,265,265,268,271},
    {25,25,25,26,36,36,36,37,45,45,45,46,46,46,57,57,57,60,60,60,71,71,71,71,72,72},
    {12,12,14,14,19,19,19,33,33,33,34,34,34,34,45,45,45,48,48,48,50,50,50,50,52,53},
    {15,15,15,16,23,23,23,26,31,33,33,34,35,36,46,46,46,49,51,51,55,55,55,55,55,55},
    {4,6,11,14,16,17,20,21,26,26,27,39,41,65,68,69,70,88,98,100,100,101,101,103,106,107},
    {1,1,1,1,2,2,3,3,7,7,7,7,7,7,7,7,7,10,10,10,12,12,12,12,12,12},
    {10,10,10,12,16,16,16,21,26,26,28,29,29,29,41,41,42,45,46,47,54,54,54,54,57,61},
    {29,29,29,30,40,40,40,40,48,48,48,48,49,49,63,63,63,66,67,68,72,72,72,72,74,74},
    {34,42,51,56,61,61,62,62,62,65,65,69,72,112,116,119,120,130,137,144,146,149,149,150,152,154},
    {10,10,10,10,12,12,12,12,18,18,18,18,18,18,20,21,21,21,21,21,21,21,21,21,21,21},
    {19,19,19,19,20,22,22,24,33,33,33,35,35,35,41,41,41,42,44,44,47,47,47,47,49,49},
    {25,27,27,30,37,37,41,42,55,55,56,58,58,58,63,63,63,63,64,65,69,69,69,69,70,70},
    {25,32,32,32,38,38,38,38,46,46,46,46,46,46,59,60,60,60,61,61,62,62,62,62,63,63},
    {25,27,32,47,60,60,94,94,112,113,116,118,122,127,132,133,133,133,139,150,150,150,150,150,153,156},
    {2,3,4,6,7,7,8,12,13,13,20,26,34,61,63,65,65,82,94,98,113,116,120,120,121,122},
    {4,4,4,4,6,6,6,8,10,10,10,11,11,11,12,12,12,13,13,15,18,18,18,18,19,19},
    {0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,9,9,9,9,9,9},
    {26,30,31,33,44,45,52,52,71,71,75,76,78,79,91,91,91,93,98,105,112,112,112,112,113,113},
    {11,13,16,16,19,19,19,30,36,36,36,36,36,37,41,41,41,42,44,57,60,60,62,62,63,63},
    {20,20,20,20,29,29,29,34,45,45,45,45,46,46,55,55,55,60,61,62,62,63,63,63,63,63},
    {8,9,9,10,15,15,16,18,21,22,23,28,31,41,41,42,42,61,69,71,71,72,73,74,75,78},
    {4,4,4,4,9,9,9,9,13,13,13,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15},
    {6,6,6,6,7,7,7,7,10,10,10,10,10,11,12,12,12,12,12,12,14,14,14,14,14,14},
    {2,2,2,2,6,6,6,6,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10},
    {16,16,16,19,20,20,20,20,20,20,20,20,20,20,26,28,28,29,30,30,30,30,30,30,30,31},
    {7,8,8,8,11,11,11,20,23,23,23,23,23,23,23,23,23,23,24,24,26,26,26,26,26,26}};

    private static int[] rowSum = {271,72,53,55,107,12,61,74,154,21,49,70,63,156,122,19,9,113,63,63,78,15,14,10,31,26};
    //Precomputed training data

    public static String generateName(List<String> data){
        String name = "";
        Random rng = RandomNumber.getRandomInstance();
        int length = data.get(rng.nextInt(data.size())).length(); //set generated length 
        char seed = (char) (97 + rng.nextInt(26)); //start with random letter
        char next = ' ';

        for(int i = 0; i < length; i++) {
            name += seed; //append letter to name
            if(i >= 1) 
            if(name.charAt(i) == name.charAt(i-1)) { //prevents long strings of the same letter
                name = name.substring(0, i);
                i--;
            }
            
            int newLetter = rng.nextInt(rowSum[seed-97]); //set new letter based on data
            for(int j = 1; j < 26; j++) {
				if(newLetter >= letters[seed-97][j-1] && newLetter <= letters[seed-97][j]) {
					next = (char)(j+97);
					seed = next;
					break;
				}
			}
        }
        return name;
    }
}
